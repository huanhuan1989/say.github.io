
<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>动物图标批量替换工具</title>
    <style>
      :root{
        --bg:#fbfdff; --primary:#66aaff; --accent:#ffb86b;
        --card-back:#76b6ff; --card-front:#fff7d6;
      }
      body {
        font-family: 'Arial', sans-serif;
        max-width: 1200px;
        margin: 0 auto;
        padding: 20px;
        background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
        min-height: 100vh;
      }
      .container {
        background: white;
        border-radius: 15px;
        padding: 30px;
        box-shadow: 0 10px 30px rgba(0,0,0,0.1);
      }
      .animal-grid {
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
        gap: 20px;
        margin: 30px 0;
      }
      .animal-card {
        text-align: center;
        padding: 15px;
        border-radius: 10px;
        background: #f8f9fa;
        transition: all 0.3s ease;
      }
      .animal-card:hover {
        transform: translateY(-5px);
        box-shadow: 0 5px 15px rgba(0,0,0,0.2);
        cursor: pointer;
      }
      .animal-img {
        width: 80px;
        height: 80px;
        object-fit: contain;
        margin-bottom: 10px;
      }
      .control-panel {
        background: #e9ecef;
        padding: 20px;
        border-radius: 10px;
        margin-bottom: 20px;
      }
      button {
        background: #007bff;
        color: white;
        border: none;
        padding: 10px 20px;
        border-radius: 5px;
        cursor: pointer;
        transition: background 0.3s;
      }
      button:hover {
        background: #0056b3;
      }
      .tabs{display:flex;gap:6px;flex-wrap:wrap}
      .tab{padding:6px 10px;border-radius:8px;background:#f0f0f0;cursor:pointer}
      .tab.active{background:var(--primary);color:#fff;font-weight:600}
    </style>
</head>
<body>
    <div class="container">
      <h1>英语单词卡</h1>

      <!-- tabs -->
      <div style="margin-top:12px">
        <div class="tabs" id="tabs"></div>
      </div>

      <div class="animal-grid" id="animalContainer">
        <!-- 动物卡片动态生成 -->
      </div>
    </div>
    <script src="./js/jQuery.min.js"></script>
    <script>
      let currentCategory = '';

      /* ---------- 渲染 tabs active ---------- */
      function renderTabs(){
        document.querySelectorAll('.tab').forEach(t=>{
          t.classList.toggle('active', t.innerText===currentCategory);
        });
      }
      
      /* ---------- 辅助：朗读 ---------- */
      function speak(text){
        if(!('speechSynthesis' in window)) return;
        const u = new SpeechSynthesisUtterance(text);
        u.lang = 'en-US';
        speechSynthesis.cancel(); // 取消上一个，避免堆积
        speechSynthesis.speak(u);
      }

      function initTabsUI(data){
        if (!data) return;

        const tabsDiv = document.getElementById("tabs");
        // tabs
        tabsDiv.innerHTML = "";
        for(let k of Object.keys(data)){
          const d = document.createElement("div");
          d.className = "tab" + (k===currentCategory ? " active" : "");
          d.innerText = k;
          d.onclick = ()=> {
            currentCategory = k;
            renderCategory(data[k]);
            renderTabs();
          };
          tabsDiv.appendChild(d);
        }
      }
        
      // 初始化显示
      function renderCategory(data) {
        if (!data) return;

        // 清空容器
        const container = document.getElementById('animalContainer');
        container.innerHTML = '';
        
        data.forEach(animal => {
            const card = document.createElement('div');
            card.setAttribute('data-word', animal.word);
            card.className = 'animal-card';
            card.innerHTML = `
                <img src="${animal.img}" data-word="${animal.word}" alt="${animal.cn}" class="animal-img">
                <div data-word="${animal.word}"><strong data-word="${animal.word}">${animal.word}</strong></div>
                <div data-word="${animal.word}">${animal.cn}</div>
            `;
            container.appendChild(card);
        });
      }

      // 页面加载时初始化
      document.addEventListener('DOMContentLoaded', () => {
        $.ajax({
          url: './data.json',
          type: 'GET',
          dataType: 'json',
          async: false
        }).done(function(data) {
          if (!data) return;
          currentCategory = Object.keys(data)[0]
          initTabsUI(data);
          renderCategory(data[currentCategory]);

          // 朗读事件
          document.addEventListener("click", function(event) {
            const tabStr = event.target.classList.toString()
            if (tabStr.includes('tab')) return;
            speak(event.target.getAttribute('data-word'));
          }, false);
        }).fail(function() {
          console.error("Error fetching data");
        });
      });
  </script>
</body>
</html>
